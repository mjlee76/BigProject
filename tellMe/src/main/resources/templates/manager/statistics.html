<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.w3.org/1999/xhtml" lang="en">
<head th:replace="layouts/navbar::tellMe_head"/>
<head th:replace="layouts/footer::tellMe_foot"/>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>통계 게시판</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
<link rel="stylesheet" type="text/css" th:href="@{/css/statistics.css}" />
<link rel="stylesheet" type="text/css" th:href="@{/css/sidebar.css}" />
<<<<<<< HEAD
<link href="https://cdn.jsdelivr.net/gh/sun-typeface/SUIT@2/fonts/static/woff2/SUIT.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels"></script>
=======
<script src="https://cdn.jsdelivr.net/npm/chart.js@3.0.0/dist/chart.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.00"></script>
<!-- 버전 2 (최신) -->
<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2"></script>
>>>>>>> ed9d1d2 (통계 css 수정)
<script th:src="@{/js/statistics.js}" defer></script>
</head>
<body>
<div th:replace="layouts/navbar::tellMe_header"></div>

<div id="wrapper">
    <!-- ✅ 사이드바 -->
    <ul class="sidebar bg-primary sidebar-dark" id="sidebar">
        <div class="sidebar-brand d-flex align-items-center justify-content-center">
            <div class="brand-text">Aivle Manager</div>
        </div>

        <div class="sidebar-heading">실시간 민원 현황</div>
        <li class="menu-item" data-target="user-management">
            <i class="fas fa-users"></i>
            <span>오늘 접수된 민원</span>
        </li>
        <li class="menu-item" data-target="inquiry-management">
            <i class="fas fa-comments"></i>
            <span>처리 대기중 민원</span>
        </li>
        <li class="menu-item" data-target="inquiry-management">
            <i class="fas fa-comments"></i>
            <span>보고서 작성된 민원</span>
        </li>

        <hr class="divider">

        <div class="sidebar-heading">민원 통계</div>
        <li class="menu-item" data-target="daily-complaints">
            <i class="fas fa-chart-line"></i>
            <span>일별 민원 통계</span>
        </li>
        <li class="menu-item" data-target="monthly-complaints">
            <i class="fas fa-chart-bar"></i>
            <span>월별 민원 통계</span>
        </li>
        <li class="menu-item" data-target="yearly-complaints">
            <i class="fas fa-calendar-alt"></i>
            <span>연도별 민원 통계</span>
        </li>
        <hr class="divider">

        <div class="sidebar-heading">유형 통계</div>
        <li class="menu-item" data-target="malicious-type">
            <i class="fas fa-exclamation-triangle"></i>
            <span>악성민원 유형 통계</span>
        </li>
        <li class="menu-item" data-target="malicious-gender">
            <i class="fas fa-venus-mars"></i>
            <span>악성민원 성별, 연령별통계</span>
        </li>

        <hr class="divider d-none d-md-block">
    </ul>
    <!-- ✅ 사이드바 끝 -->
    <div id="content-wrapper">
        <!-- 실시간 민원 현황 -->
        <div class="chart-box">
            <h2>실시간 민원 현황</h2>
            <div class="chart-wrapper">
                <canvas id="realTimeChart"></canvas>
            </div>
        </div>

        <!-- 파이차트 2개를 같은 줄에 배치 -->
        <div class="chart-container">
            <!-- 처리 대기중 민원수 -->
            <div class="chart-box">
                <h2>처리 대기중 민원수</h2>
                <div class="chart-wrapper">
                    <canvas id="statusChart"></canvas>
                </div>
            </div>

            <!-- 보고서 확인 상태별 통계 -->
            <div class="chart-box">
                <h2>보고서 상태별 통계</h2>
                <div class="chart-wrapper">
                    <canvas id="reportstatusChart"></canvas>
                </div>
            </div>
        </div>
    </div>

</div>

<div th:replace="layouts/footer::tellMe_footer"></div>

<!-- Thymeleaf를 사용하여 데이터를 JavaScript로 전달 -->g
<script th:inline="javascript">
    /*<![CDATA[*/
    var statistics = {
        전체민원수: [[${statistics.전체민원수}]],
        악성민원비율: [[${statistics.악성민원비율}]],
        접수중Count: [[${statistics.접수중Count}]],
        처리중Count: [[${statistics.처리중Count}]],
        미확인Count: [[${statistics.미확인Count}]],
        확인완료Count: [[${statistics.확인완료Count}]]
    };

    var questionsAndMaliciousByHour = {
        normal: [[${questionsAndMaliciousByHour['normal']}]],
        malicious: [[${questionsAndMaliciousByHour['malicious']}]]
    };
    /*]]>*/
</script>


</body>
</html>